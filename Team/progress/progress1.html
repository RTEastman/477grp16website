<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!--
This is an example weekly progress report document that team members can use to report their individual progress 
of their ECE477 senior design projects. Weekly progress reports are expected to follow the general guidelines
presented in the "Progress Report Policy" document, available online at https://engineering.purdue.edu/ece477/Course/Policies/policies.html

Please create 4 copies of this example, renaming each copy to <PurdueID>.html, where <PurdueID> corresponds to
the Purdue ITAP Career Account ID given by Purdue to each individual team member. If you have any questions,
contact course staff.
-->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<!--Reconfigurable base tag; used to modify the site root location for root-relative links-->
<base href="https://engineering.purdue.edu/477grp16/" />

<!--Content-->
<title>ECE477 Course Documents</title>
<meta name="keywords" content="" />
<meta name="description" content="" />
<meta name="author" content="George Hadley">
<meta name = "format-detection" content = "telephone=no" />
<meta name="viewport" content="width=device-width,initial-scale=1.0">

<!--CSS-->
<link rel="stylesheet" href="css/default.css" type="text/css" media="all" />
<link rel="stylesheet" href="css/responsive.css">
<link rel="stylesheet" href="css/styles.css">
<link rel="stylesheet" href="css/content.css">
<!--[if IE 6]>
<link href="default_ie6.css" rel="stylesheet" type="text/css" />
<![endif]-->

</head>
<body>
<div id="wrapper_site">
    <div id="wrapper_page">
	<!-- Instantiate global site header.-->
	<div id="header"></div>
		<!-- Instantiate site global navigation bar.-->
		<div id="menu"></div>
	
		<!-- Instantiate a page banner image. Page banner images should be 1100x350px and should be located within the local
			img folder located at this directory level. -->
		<div id="banner">
			<img src="Files/img/BannerImgExample.jpg"></img>
		</div>
	
		<!-- Instantiate "tools" needed for a page. Tools are premade functional blocks that can be used to build a page,
			and include things such as a file lister (for listing out homework assignments or tutorials)
		-->
		<div id="content">
            <h2>Progress Report for Jason Cao</h2>
            
            <h4>Week 1:</h4>
            <b>Date:</b> 1/28/2021<br>
            <b>Total hours:</b> 6<br>
            <b>Description of design efforts:</b><br>
            Assigned roles and responsibilites to team members based on technical knowledge base, background, and interests.  
			Further revised Initial Proposal document according the instructor's feedback.  Contributed to the Final Proposal document by writing Project Description, parts of Roles and Responsibilities, and Homework Assignment Responsibilities.  Contributed to Project Specific Success Criteria #3, #4, and #5 through productive conversations with teammates.  Performed preliminary research on 2D barcode scanners to gauge the price range. </br>

            <br>

            <h4>Week 2:</h4>
            <b>Date:</b> 1/28/2021<br>
            <b>Total hours:</b> 8<br>
            <b>Description of design efforts:</b><br>
            Further revised Final Proposal document based on instructor feedback.  Helped generate more specific Project Specific Success Criteria through productive team meetings using previously suggestions discussed with teacher assistant and instructors.  Corrected the budget in Final Proposal document.  Performed more research into 2D barcode scanners using viable vendors that do not have delays.  Started initial planning and setting up personal computer for software implementation of microcontroller.</br>
             
	    <br>
	
            <h4>Week 3:</h4>
            <b>Date:</b> 2/05/2021<br>
            <b>Total hours:</b> 8<br>
            <b>Description of design efforts:</b><br>
            Further looked into implementation of physical hardware.  Looked at multiple different variations of conveyor belt rollers, included sprocketed rollers and grooved rollers. Finalized the choice of conveyor belt material with Jonah based on specifications of coefficient of friction.  
	    Also discussed with Ryan about how to implement the array of barcode sensors with the microcontroller.  Talked about different communication protocols, such as I2C, serial, and USART.  Found that USART was the most preferrable protocol to use.  Beginning to form preliminary allocation of microcontroller resources (GPIO, USART, etc.).
			Beginning to compile list of finalized parts to purchase.</br>
	   <img src="Team/img/conveyor_roller1.JPG" width="500"></img>
	   <img src="Team/img/motor_conveyor1.JPG" width="500"></img>
	   <img src="Team/img/purchase_links.JPG" width="500"></img>
        
	    <h4>Week 4:</h4>
            <b>Date:</b> 2/12/2021<br>
            <b>Total hours:</b> 8<br>
            <b>Description of design efforts:</b><br>
            Completed preliminary design of hardware assembly of conveyor belt system.  Looked into purchasing of frame structure to hold conveyor components.  Order already placed for barcode sensor.  Began ordering essential components (motors, sensors, etc.). More physical components (i.e. structural components) will be ordered by the end of Week 5.  Completed preliminary list of parts to purchase.  This list contains all of the parts that 
			are necessary for project completion, not taking into account any issues that may arise during assembly.</br>
		<img src="Team/img/preliminary_design1.JPG" width="500"></img>
	   <img src="Team/img/preliminary_design2.JPG" width="500"></img>

		<h4>Week 5:</h4>
			    <b>Date:</b> 2/19/2021<br>
			    <b>Total hours:</b> 7<br>
			    <b>Description of design efforts:</b><br>
			    Completed order for essential electronic parts (i.e. sensors, voltage regulators, etc.).  A major cost barrier has arisen due to the structural components solely from McMaster-Carr.  More alternative options are being discussed as to reduce costs, while still maintaining the quality of the project.
			Barcode sensor order has not come yet, and will hopefully be addressed as soon as possible.  Ordering for structural components will be put on hold as alternatives are being discussed, like local supplier Fastenol.  
			By end of week 6, all structural components should be ordered.  One design change that has come up is to change the width between frame from 12 inches to 10 inches, as there seem to be more vendors selling 10 inch rollers.  The change is also reflected in the revised sketch
			of the roller below.  The Bill of Materials will primarily be used as a checklist to track which components have been ordered.</br>
		<figure>
		<img src="Team/img/purchase_links_update1.JPG" width="500"></img>
		<figcaption>Figure 1.1 </figcaption>
		<img src="Team/img/revised_schematic.JPG" width="500"></img>
		<figcaption>Figure 1.2 </figcaption>
		</figure>

		<h4>Week 6:</h4>
		    <b>Date:</b> 2/26/2021<br>
		    <b>Total hours:</b> 8<br>
		    <b>Description of design efforts:</b><br>
		    We are continuing to explore more options for purchasing a pre-fabricated conveyor belt system, but we have found a few leads from various sites (Ebay, Amazon, and other websites).  At this point in time, we have ruled out building out the custom solution, which mainly relied on McMaster-Carr.  This option would have been extremely expensive and could be nearly double the cost.
		Barcode sensor order has not come yet, and will hopefully be addressed as soon as possible.  We have already sent out an email to one of the e-sellers for a pre-fabricated roller system for more information and potential sponsorship.  
			At this point, we have made back up plans should circumstances become unfavorable (i.e. delayed shipping times, higher than expected prices, more building work than expected, etc.).  One of the options in consideration is shown below.</br>

		<figure>
		<img src="Team/img/conveyor_roller_option1.JPG" width="500"></img>
		<figcaption>Figure 1.3 This is the option that we will be looking at closely, and is one of the most affordable options we have found so far.</figcaption>
		<img src="Team/img/eii.JPG" width="500"></img>
		<figcaption>Figure 1.4 We will be contacting EII soon to discuss sourcing components and a potential sponsorship.</figcaption>
		</figure>


		<h4>Week 7:</h4>
		    <b>Date:</b> 3/5/2021<br>
		    <b>Total hours:</b> 9<br>
		    <b>Description of design efforts:</b><br>
		    We are continuing to explore more options for purchasing a pre-fabricated conveyor belt system.  I have reached out to a contact at Engineering Innovation for assistance in sourcing a pre-fabricated conveyor roller that would fit our specifications.
		The barcode sensor order has just arrived, and we will begin creating code as soon as possible.  At this point, we still have our back up options in place should circumstances become unfavorable (i.e. delayed shipping times, higher than expected prices, more building work than expected, etc.).</br>

		<figure>
		<img src="Team/img/eii.JPG" width="500"></img>
		<figcaption>Figure 1.5 We have already contacted EII to discuss sourcing components and a potential sponsorship.  We are eagerly awaiting their reply.</figcaption>
		</figure>

		<h4>Week 9:</h4>
		    <b>Date:</b> 3/17/2021<br>
		    <b>Total hours:</b> 6.5<br>
		    <b>Description of design efforts:</b><br>
		    We have acquisitioned a conveyor belt, power supply, and other structural components that were generously donated by Engineering Innovation (EII).  While on-site at EII, we had to disassemble large portions of the 
			conveyor belt, transport it to Ryan Eastman's apartment, and reassemble it using our own tools.  We will continue to assemble more structural components in the coming days, like the stand for the barcode scanner and the 
			sorting mechanism flaps.  The barcode scanner has already arrived for some time and we have begun testing and writing code for to read in test 2D barcodes.  </br>

		<figure>
		<img src="Team/img/IMG_7461.JPG" width="500"></img>
		<figcaption>Figure 1.6 The conveyor components that were supplied by EII.  We have already assembled the frame.  We will soon assemble the other structural components, like the barcode scanner supports and the sorting mechanism flaps.</figcaption>
		</figure>
		<h4>Week 10:</h4>
		    <b>Date:</b> 3/26/2021<br>
		    <b>Total hours:</b> 7<br>
		    <b>Description of design efforts:</b><br>
		    We are continuing the assembly of our conveyor belt.  We have recently tested power supply to ensure functionality, and we managed to interface with the PLC controller via Ethernet.  We did manage to make both belts move at 1 m/s, though we will need to do some slight mechanical tuning as the belt 
			becomes misaligned after around of minute of use.  I have started working on the code base that would be responsible for controlling the servo motors on the sorting mechanism, and taking information from the barcode sensor.  I have 
			included a rough figure below of an overview of how the code would function.</br>
		<figure>
		<img src= "Team/img/code figure.jpg" width ="500"></img>
		<figcaption>Figure 1.7  A figure of how the STM32 code will operate in this project.</figcaption>
		</figure>
		<h4>Week 11:</h4>
		    <b>Date:</b> 4/2/2021<br>
		    <b>Total hours:</b> 7<br>
		    <b>Description of design efforts:</b><br>
		    We are in the process of obtaining a new ESC.  We have recently found out the the PLC controller on the conveyor belt has very limited capability in terms of external interfacing, 
			which is understandable as this was meant to be used in a commercial setting assuming the clientele does not have in-depth knowledge on how to program firmware for PLC controllers.  
			Going forward, our plan is to try and interface with the conveyor motors directly using an ESC and our STM microcontrollers.  As I stated in my previous progress report, I will be 
			be responsible for controlling the servo motors on the sorting mechanism, and taking information from the barcode sensor.  I have started building up the system for bit-masking from the
			RDR, which will hold the barcode sensor data.  The code progress has been slow because I have been encountering difficulty trying to recall some of the critical registers that need to be set.  I eventually
			had to scrap most of it because it generated a lot of errors, and I do not have all of the components to test my code.  I should have time in the coming week to come to office hours should the need arise.  I have included screenshots of what happened after I deleted large chunks of code.  Over the weekend, Zi will be sending me his code, and 
			I will be rebuilding my code and integrating his code into the code base.</br>
		<figure>
		<img src= "Team/img/code_evol1a.JPG" width ="500"></img>
		<img src= "Team/img/code_evol1b.JPG" width ="500"></img>
		<img src= "Team/img/code_evol2.JPG" width ="500"></img>
		<img src= "Team/img/code_evol3.JPG" width ="500"></img>
		<figcaption>Figure 1.8  The code I generated post mass destruction.</figcaption>
		</figure>
		<h4>Week 12:</h4>
		    <b>Date:</b> 4/9/2021<br>
		    <b>Total hours:</b> 13<br>
		    <b>Description of design efforts:</b><br>
		    We just received a new ESC for the conveyor.  I have done some experimenting on my own the barcode scanner in order to get better acquainted with it as I have not had a chance to work with it until this week.
			I have started building up my integration for the code with Zi's original work.  I have created a new linked list structure to store the
			barcode information.  Originally, I had the idea to store the barcode in the form of a char C array, but I realize that I may need to set up more code in case memory on the STM32 becomes a problem due to character arrays in the struct.
			Along the way, there have been a few errors I encountered with pointers and structs, but these have mostly been resolved.  One thing that I am still trying to figure out is a simple workaround for "printf" as I do not believe this is supported.  
			One idea that came up was when I did the ECE 362 project and last few assignments, we used Tera Term to output text.  I might consider implementing that or something similar to this.</br>
		<figure>
		<img src= "Team/img/jason_screencaps/header_filev1.JPG" width ="500"></img>
		<img src= "Team/img/jason_screencaps/main_filev1.JPG" width ="500"></img>
		<img src= "Team/img/jason_screencaps/main_filev1b.JPG" width ="500"></img>
		<img src= "Team/img/jason_screencaps/main_filev1c.JPG" width ="500"></img>
		<img src= "Team/img/jason_screencaps/main_filev1d.JPG" width ="500"></img>
		<img src= "Team/img/jason_screencaps/main_filev1e.JPG" width ="500"></img>
		<figcaption>Figure 1.9 Some screenshots of the code I generated during this week. In the bottom-most image, there is some code that has been added for the storing of barcode information into a linked list.</figcaption>
		</figure>
		<h4>Week 13:</h4>
		    <b>Date:</b> 4/16/2021<br>
		    <b>Total hours:</b> 9<br>
		    <b>Description of design efforts:</b><br>
			Jonah, and Ryan spent a lot of working on getting the conveyor belt motors to operate using the PWM coming from the STM.  I talked with Ryan about how to integrate the time of flight sensor code
			into my code.  I managed to integrate Zi's code into my code without any noticeable syntax errors and now I am working on integrating Jonah's code into my code.  I will be dividing up each 
			part into functions so debugging will be much easier.  However, I may have to revise my approach to integrating Ryan's code as the TOF must also run in an infinite loop.
		    </br>
		<figure>
		<img src= "Team/img/jason_screencaps/code_drawing.png" width ="500"></img>
		<figcaption>Figure 1.10 Preliminary strategy for Ryan's code that will most likely change come implementation time.</figcaption>
		<h4>Week 14:</h4>
		    <b>Date:</b> 4/23/2021<br>
		    <b>Total hours:</b> 29<br>
		    <b>Description of design efforts:</b><br>
			I spend a lot of time helping Ryan with his I2C code.  I talked with Andjey about why I had an infinite loop at a very basic line of code that sets up the linked list to store barcode data.
			I have also determined that I will be doing everything in an infinite loop (i.e. checking distances, reading in barcodes, and outputting PWM signals).  At this point, it is just taking the time
			to code everything out.  Once the code is done, physical hardware testing can begin.
		    </br>
		
		<center><iframe width="560" height="315" src="https://www.youtube.com/embed/bR0XqePDMCA" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></center>
		<center><p>This video shows barcode sensor continuously scanning barcode data and masking the bits.  This video confirms that bit masking is operating correctly.</p></center>
		</figure>
		</div>
	
		<!-- Instantiate global footer. Any changes to the footer should be made through the top-level file "footer.html" -->
		<div id="footer"></div>
    </div>
</div>

<!--JS-->
<script src="js/jquery.js"></script>
<script src="js/jquery-migrate-1.1.1.js"></script>

<script type="text/javascript">
$(document).ready(function() {
    $("#header").load("header.html");
	$("#menu").load("navbar.html");
	$("#footer").load("footer.html");
});
</script>
</body>
</html>
